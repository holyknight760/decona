#(base) root@f71e1d3555ad:~/circos-course/session/1/1/etc/etc# cat circos.conf
#karyotype = karyotype.5chr.txt
#karyotype = tsetse.txt
karyotype = tick.karyotype.txt

#chromosomes_units           = 10000
#chromosomes_units           = 100  
chromosomes_units           = 10    

chromosomes_display_default = yes
#chromosomes_display_default = no
#chromosomes_scale = /chr[2345]/=0.2rn

<links>
<link>
#file   = conf(datadir)/ortho.links.txt
#file   = conf(datadir)/links.txt
ribbon = yes
flat   = yes
file   = links.txt
#radius = 0.90r
#color         = black_a5
radius        = 0.95r
#thickness     = 10
bezier_radius = 0.1r
#링크의 각도를 줘서 공간을 확보하려면 bezier_radius 값을 높여준다.
#bezier_radius = 0.9r
#thickness     = 1

<rules>
<rule>
condition = 1
#color = eval(sprintf("chr%s_a1",substr(var(chr2),2)))
color = eval(sprintf("%s_a4",lc var(chr1)))
radius2 = 0.99r
#z = eval(var(size2))
flow = stop
</rule>
</rules>

</link>
</links>
#datadir           = ../data
#datadir           = ~/circos-course/session/1/1/etc/etc
#karyotype         = conf(datadir)/lm.karyotype.txt,conf(datadir)/lf.karyotype.txt

#chromosomes_reverse = /jF/
#chromosomes_color   = /./=var(chr)

# seq 0 36 | awk '{printf("lmjf.%02d=lch(80,80,%d)\n",$1,int($1*360/37))}'
luminance = 70
chroma    = 100

<colors>
Homo=lch(conf(luminance),conf(chroma),0)
Apodemus=lch(conf(luminance),conf(chroma),9)
Pangshura=lch(conf(luminance),conf(chroma),19)
Hydropotes=lch(conf(luminance),conf(chroma),29)
Eurycea=lch(conf(luminance),conf(chroma),38)
Mus=lch(conf(luminance),conf(chroma),48)
Bos=lch(conf(luminance),conf(chroma),58)
Rattus=lch(conf(luminance),conf(chroma),68)
Axis=lch(conf(luminance),conf(chroma),77)
Mazama=lch(conf(luminance),conf(chroma),87)
Haemaphysalis=lch(conf(luminance),conf(chroma),97)
</colors>

<rules>
use = yes
<rule>
condition = 1
color     = eval(sprintf("%s_a4",lc var(chr1)))
#flow      = continue
</rule>
<rule>
condition = substr(var(chr1),-2) eq substr(var(chr2),-2)
show      = no
</rule>
</rules>

#<<include ideogram.conf>>
<ideograms>
<ideogram>
<spacing>
#default = 2u
default = 0.005r
#0.005r는 각 ideogram 사이의 간격을 원의 반지름의 0.005배로 설정한다는 의미입니다. 이 값을 줄이면 간격이 좁아지고, 늘리면 간격이 넓어집니다.
#default = 10u

#<pairwise chr1>
#spacing = 5u
#</pairwise>

#<pairwise chr2 chr3>
#spacing = 15u
#</pairwise>

#<pairwise chr3 chr4>
#spacing = 25u
#</pairwise>
</spacing>
</ideogram>

#<<include ideogram_ori.conf>>
<ideogram>
# Default ideogram settings for all lessons in this section.

# thickness and color of ideograms
thickness        = 25p
stroke_thickness = 1
stroke_color     = vdgrey

# the default chromosome color is set here and any value
# defined in the karyotype file overrides it
fill             = yes
fill_color       = black

# fractional radius position of chromosome ideogram within image
radius         = 0.80r
show_label     = yes
label_font     = default
#label_radius   = dims(ideogram,radius) + 0.150r
#label_size     = 36
label_size     = 48  # 레이블 크기를 늘려서 더 잘 보이게 합니다.
label_radius   = dims(ideogram,radius) + 0.125r  # 라벨의 반지름을 줄여서 겹침을 최소화합니다.
#label_size     = 30  # 라벨의 크기를 줄여서 겹침을 최소화합니다.
#label_parallel = yes
#label_radius   = dims(ideogram,radius) + 0.3r  # 라벨의 반지름을 늘려서 라벨이 ticks로부터 더 멀어지게 합니다.
label_parallel = no  # 라벨이 ticks와 평행하지 않게 합니다.
label_case     = upper

# show_bands determines whether the outline of cytogenetic bands
# will be seen
show_bands            = yes

# in order to fill the bands with the color defined in the karyotype
# file you must set fill_bands
fill_bands            = yes
band_stroke_thickness = 1
band_transparency     = 1
</ideogram>
</ideograms>

#<<include ticks.conf>>
show_ticks          = yes
show_tick_labels    = yes

<ticks>
label_font      = default
radius          = dims(ideogram,radius_outer)
label_offset    = 5p
label_size      = 20p  # 레이블 크기를 늘려서 더 잘 보이게 합니다.
#multiplier      = 1e-6
#multiplier는 ticks의 값을 변환하는 데 사용되는 배수입니다. 여기서는 1e-6으로 설정되어 있어서, 원래의 값이 1,000,000 이하인 경우 모든 ticks의 라벨이 '0’으로 표시됩니다.
multiplier      = 1   # multiplier 값을 1로 설정합니다.
color           = black
thickness       = 2p   # ticks의 두께를 늘려서 더 잘 보이게 합니다.

<tick>
spacing        = 1u
size           = 10p  # ticks의 크기를 늘려서 더 잘 보이게 합니다.
show_label     = no
</tick>

<tick>
spacing        = 5u
size           = 15p  # ticks의 크기를 늘려서 더 잘 보이게 합니다.
show_label     = no

grid_start     = 0.5r
grid_end       = 0.975r
grid_color     = black
grid_thickness = 3p   # grid의 두께를 늘려서 더 잘 보이게 합니다.
show_grid      = yes
</tick>

<tick>
spacing        = 10u
size           = 20p  # ticks의 크기를 늘려서 더 잘 보이게 합니다.
show_label     = yes
label_size     = 25p  # 레이블 크기를 늘려서 더 잘 보이게 합니다.
#format         = %d
#정수 형식으로 라벨을 표시하도록 지시
#format         = %.2f  # 비율을 소수점 두 자리까지 표시하도록 설정합니다.
#format         = %d%%  # 퍼센트 형식으로 라벨을 표시하도록 설정합니다.
#라벨을 표시하도록 하고, 라벨의 값은 tick의 상대적 위치에 100을 곱한 후 정수로 표시하며, 라벨 뒤에 ‘%’ 문자를 추가
label_relative = yes
rmultiplier    = 100
format         = %d
suffix         = %
</tick>

<tick>
#원형 그래프의 반지름의 75% 위치에 tick를 표시
radius         = 0.75r
#각 tick 사이의 간격을 상대적으로 설정
spacing_type   = relative
#각 tick 사이의 간격이 전체 원형 그래프의 10%
rspacing       = 0.10
#tick의 크기를 6포인트, 두께를 1포인트
size           = 6p
thickness      = 1p
#라벨을 표시하도록 하고, 라벨의 값은 tick의 상대적 위치에 100을 곱한 후 정수로 표시하며, 라벨 뒤에 ‘%’ 문자를 추가
show_label     = yes
label_relative = yes
rmultiplier    = 100
format         = %d
suffix         = %

#원형 그래프의 반지름의 50% 위치에서 75% 위치까지 회색의 grid를 표시
grid_start     = 0.5r
grid_end       = 0.75r
grid_color     = grey
grid_thickness = 1p
grid           = yes

</tick>
</ticks>

#<<include image.conf>>
# Default image settings for all example files.
#
# This block overrides 'radius', 'svg' and 'dir' parameters in the default
# etc/image.conf, which is imported from the Circos distribution
# directory.
#
# The "*" syntax is used to override a parameter with the same name
# found elsewhere in the block.
<images>
<image>
dir*    = .
#radius* = 500p
radius* = 2000p  # 이미지의 반지름을 2000 픽셀로 지정, 이미지 크기를 4000 x 4000 픽셀로 조정합니다.
svg*    = no
</image>
#<<include etc/image.conf>>
#<<include image.generic.conf>>
dir   = . 
#dir  = conf(configdir)
file  = circos.png
png   = yes
svg   = yes
# radius of inscribed circle in image
radius         = 1500p
# by default angle=0 is at 3 o'clock position
angle_offset      = -90
#angle_orientation = counterclockwise
auto_alpha_colors = yes
auto_alpha_steps  = 5
#<<include background.white.conf>>
background = white
<image>
dir*    = .
radius* = 500p
svg*    = no
<<include etc/image.conf>>
</image>
data_out_of_range* = trim
</image>
</images>
data_out_of_range* = trim #이 설정은 데이터 값이 정의된 범위를 벗어날 경우 어떻게 처리할지를 지정합니다. 
#trim으로 설정된 경우, 범위를 벗어나는 데이터는 가장 가까운 범위의 한계 값으로 잘립니다.

<<include colors_fonts_patterns.conf>>
#<<include housekeeping.conf>>
# Housekeeping parameters, which must be included
# at the top level of the configuration.
#
# Don't adjust these, unless you know what you are doing, or
# feel like experimenting

anglestep       = 0.5
minslicestep    = 10
beziersamples   = 40 # bezier curves are drawn piece-wise
                     # linear, with this many samples
debug           = no
warnings        = no
imagemap        = no
paranoid        = yes

units_ok        = bupr
units_nounit    = n

# \t  tab
# \s  any whitespace
file_delim = \s
# collapse adjacent whitespace 
# e.g. two spaces are treated as one, not as a missing field
file_delim_collapse = yes

# Record delimiter for parameter values that are lists, such as
# hs1:0.25;hs2:0.10. By default, both ; and , are accepted
#
# e.g. hs1:0.25,hs2:0.10
#      hs1:0.25;hs2:0.10
list_record_delim = \s*[;,]\s*
# Field delimiter specifies the assignment operator, e.g. 
list_field_delim  = \s*[:=]\s*

# Record delimiter for options in data files.
options_record_delim = [,;]
options_field_delim  = =

# Rule fields and other parameters accept var(VARIABLE) syntax
# to reference parameters of data points. By default, if
# VARIABLE does not exist, Circos quits with an error, unless
# the skip parameter below is set.
# 
# This feature is useful when you have data that don't always
# have the same options. For example,
# 
# chr1 10 20 a=10
# chr1 50 60 b=10
skip_missing_expression_vars = no

# In old versions, data point parameters were referenced using _NAME_
# syntax. This has been replaced with var(NAME). The _NAME_ syntax is
# deprecated (for example, it will break when dealing with fields like
# gene_a_1). If you must use it, set the parameter below.

legacy_underline_expression_syntax = no

# Magnification factor for text in SVG files.
svg_font_scale = 1.3

# super/sub script baseline shift (%)
sup_baseline_shift = 40
sub_baseline_shift = -40

# super/sub script font size (%)
sup_fontsize = 90
sub_fontsize = 90

# default font - pick one of the keys from <fonts> block
default_font   = default
# default font name is used for SVG files for cases where
# the font definition does not include a name
# see etc/fonts.conf for details
default_font_name  = Arial
default_font_color = black

# default color for cases when color is not specified
default_color  = black

<guides>
thickness      = 1
size           = 5
type           = outline
<object>
all            = no
ideogram       = no
ideogram_label = no
</object>
<color>
default = lblue
text    = red
</color>
</guides>

# Receive debug messages about actions
# 
# For a full list of available debug groups, see 
#   
#  http://www.circos.ca/documentation/tutorials/configuration/debugging/
#
# Common ones are:
#
# summary   - top level indications of what's happening (on by default)
# chrfilter - ideogram filtering (parsing 'chromosomes' parameter)
# conf      - configuration file
# io        - file I/O
# ideogram  - ideogram reporting
# layers    - specific plot z-layers
# rules     - dynamic rules
# color     - color allocation and definition
# timers    - some benchmark timings
# cache     - caches
# _all      - turn on all groups

debug_group = summary,output

# run length duration after which timing report is automatically
# generated at the end of the run
debug_auto_timer_report = 30

debug_word_separator = " "
debug_undef_text     = _undef_
debug_empty_text     = _emptylist_

# parameters passed to functions can be
# validated to check consistency. turn this
# off to speed things up
debug_validate       = yes

# Reformat numbers in debug output for consistency.
# If you have a lot of debug output (e.g. -debug_group _all)
# this will slow things considerably.
debug_output_tidy    = no

# pixel sub-sampling for text tracks
text_pixel_subsampling = 1
# array or span - use 'span' if applying snuggle refinement
text_snuggle_method    = array

# restrict names of parameters?
# if 'yes' then only certain named parameters are allowed within
# blocks and option fields for data
#
# if 'no' then you can define parameters with any name what-so-ever,
# useful if you wish to define states or labels for your data
#
# e.g. hs1 10 20 0.5 paired=yes,special=no,myvar=0.5
#
# ordinarily, 'paired', 'special' and 'myvar' would not be allowed
restrict_parameter_names = no

# Unless set to 'yes', parameter names will be converted to lowercase
case_sensitive_parameter_names = no

# Calculate track statistics? Gives access to 
# min 
# max 
# average 
# n - number of data points in track
# sd - standard deviation
# var - variance (sd^2)
#
# Once these are calculated, you can refer to the value using plot(STATISTIC)
# e.g.
# <rule>
# condition = plot(average) < 0.5
# ...
calculate_track_statistics = yes

# The location of configuration and data files will be guessed if 
# (a) configuration file is not specified
# (b) data file paths are relative
# Circos will look in the following locations, where 
# SCRIPTPATH is the location of the 'circos' script (e.g. /usr/local/bin) and
# CWD is the current directory (where the 'circos' command was executed).
# All paths under CWD will be scanned first, then under SCRIPTPATH.
#
# {CWD,SCRIPTPATH}/.
# {CWD,SCRIPTPATH}/..
# {CWD,SCRIPTPATH}/etc/
# {CWD,SCRIPTPATH}/../etc
# {CWD,SCRIPTPATH}/../../etc
# {CWD,SCRIPTPATH}/data
# {CWD,SCRIPTPATH}/../data
# {CWD,SCRIPTPATH}/../../data
#
# If you would like to prepend this list with custom directories for
# data files, enter them as a CSV list here
# data_path = /home/martink/circos-tutorials 

# If the cache is static, it will always be used and will not be updated
# unless it is deleted (use -color_cache_rebuild on the command line).
# Otherwise, the cache will be updated if 
#  - config file is newer than cache file
#  - list of colors in config file is different than in cache file
color_cache_static = yes
color_cache_file   = circos.colorlist
color_lists_use    = yes
# if the directory is not defined, then the system will guess a temporary
# directory compatible with your operating system (using File::Temp)
# color_cache_dir    = /tmp

# Make some functions faster. This should always be 'yes' unless you
# want things to run slowly or suspect deep issues.
memoize = yes

# This is a debugging flag and should be set to 'no' for regular use
quit_on_dump = yes

offsets = 0,0

# Maximum number of image and data elements. If these are exceeded,
# Circos will quit with an error. These values are arbitrary, but in
# my experience images with significantly more data points than this
# are uninterpretable.

max_ticks            = 5000
max_ideograms        = 200
max_links            = 25000
max_points_per_track = 25000

# What to do when data is found for an ideogram that does not appear in the karyotype file.
# Set to 'skip' or 'exit'
undefined_ideogram = skip

# Number of iterations for determining ideogram sizes when
# relative scale is used.
relative_scale_iterations = 10

# min, max, average, mode             - based on scale statistics of ALL ideograms
# minadj, maxadj, averageadj, modeadj - based on scale statistics of adjacent ideograms
# 
# You can specify a fixed scale for spacing using a floating value
#
# e.g. relative_scale_spacing = 1.5
relative_scale_spacing    = mode

# What to do with out-of-range data, or data that extends beyond
# ideogram range. This applies to all plot types and links.  Set to
# 'hide' or 'trim' or 'fatal'. For 'hide' and 'trim', optionally add
# 'warn' to produce a warning. Data points that fall entirely
# outside of their ideogram will never be shown, regardless whether
# you've set 'hide' or 'trim'.
#
# This check DOES NOT trigger for data that falls on ideograms that
# are not being displayed.
#
# e.g.
# hide
# hide,warn
# trim
# trim,warn
# fatal
data_out_of_range = trim,warn # 

# Track default directory
track_defaults = etc/tracks

# Use round brushes for elements with thickness greater than round_brush_min_thickness?
round_brush_use           = yes
round_brush_min_thickness = 5

# Use anti aliasing, where possible? I've seen bugs in some gd libraries
# that cause artefacts to appear when lines are anti-aliased. If your
# image contains unexpected elements, turn aa off.
anti_aliasing = yes

# A parameter that must be set. Checks whether this file was imported.
housekeeping = yes

# Should parameter values be evaluated as code by default? This
# allows you to avoid eval() in expressions. However, this is
# dangerous because it does not return errors.
auto_eval = no

#data_out_of_range* = trim

